<div class="content">
  <div class="idea_title">
    <h2 *ngIf="idea">
      {{ idea.title }}
    </h2>
    <h4 *ngIf="idea">
      {{ idea.description }}
    </h4>
    <p *ngIf="idea">
      Upvotes: {{ idea.upvotes_count }}
    </p>
  </div>
  <div class="new_comment">
    <button type="button" class="btn btn-primary" (click)="newCommentButton()">Write a new comment</button>
    <form *ngIf="newComment" [formGroup]="newCommentForm" (ngSubmit)="onSubmit()" class="newCommentClass">
      <div class="form-group">
        <textarea type="text" placeholder="Your comment" 
          formControlName="commentText" id="commentText" rows="5" 
          class="form-control" [ngClass]="{ 'is-invalid': submitted && f.commentText.errors }"></textarea>
        <div *ngIf="submitted && f.commentText.errors" class="invalid-feedback">
          <div *ngIf="f.commentText.errors.required">You can't submit an empty comment</div>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-primary create_comment">Send comment</button>
      </div>
    </form>
  </div>
  <div class="comments_content">
    <h2>
      Comments
    </h2>
    <div *ngFor="let comment of commentList" id="{{ comment.id }}" class="individual_comment">
      <div class="comment_text">
        {{ comment.text }}
        <div *ngIf="adminOrMod" class="adminDeleteDiv">
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-light" data-toggle="modal" 
          attr.data-target="#deleteConfirmModal-{{comment.id}}">
            x
          </button>
          <!-- Modal -->
          <div class="modal fade" id="deleteConfirmModal-{{comment.id}}" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Delete comment</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeButton-{{comment.id}}">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  Are you sure you want to delete this comment?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                  <button type="button" class="btn btn-primary" (click)="deleteComment(comment.id)">Delete comment</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      <div class="comment_date">
        {{ comment.updated_at }}
      </div>
      <div class="comment_owner">
        <a [routerLink]="['../../profile', comment.user.id]">
          {{ comment.user.username }}
        </a>
      </div>
    </div>
  </div>
</div>
